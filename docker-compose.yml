version: '3'

services:
    web:
        build: ./docker/web
        ports:
            - "80:80"
            - "443:443"
        volumes:
            - ./docker/web/nginx.conf:/etc/nginx/nginx.conf
            - ./docker/web/conf.d:/etc/nginx/conf.d
            - ./html:/var/www/html
        depends_on:
            - wp
    wp:
        build: ./docker/wp
        volumes:
            # - ./docker/wp/php.ini:/usr/local/etc/php/php.ini
            - ./html:/var/www/html
        depends_on:
            - db
    db:
        build: ./docker/db
        volumes:
            - ./mysql:/var/lib/mysql
        ports:
            - 43306:3306
        environment:
            MYSQL_DATABASE: wordpress
            MYSQL_USER: wpuser
            MYSQL_PASSWORD: password
            MYSQL_ROOT_PASSWORD: password
# volumes:
#     document_root:
#         driver_opts:
#             type: none
#             device: /usr/share/nginx/html
#             o: bind